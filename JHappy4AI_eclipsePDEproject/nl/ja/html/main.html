<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>JHappy AI Exporter ユーザーガイド</title>
    <style>
        body { font-family: "Meiryo", "Yu Gothic", sans-serif; line-height: 1.6; padding: 30px; color: #333; max-width: 900px; margin: auto; }
        h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; display: flex; align-items: center; }
        h2 { color: #2980b9; margin-top: 40px; border-left: 6px solid #2980b9; padding-left: 15px; background: #f0f7fb; padding-top: 5px; padding-bottom: 5px; }
        h3 { color: #2c3e50; border-bottom: 1px solid #ddd; margin-top: 25px; }
        .toc { background: #fdfdfd; border: 1px solid #e1e4e8; padding: 20px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .toc strong { display: block; margin-bottom: 10px; font-size: 1.1em; color: #2c3e50; }
        .toc ul { list-style-type: none; padding-left: 0; }
        .toc li { margin-bottom: 8px; }
        .toc a { text-decoration: none; color: #3498db; font-weight: bold; }
        .toc a:hover { text-decoration: underline; }
        .image-container { text-align: center; margin: 30px 0; border: 1px solid #eee; padding: 10px; background: #fff; }
        .note { background: #fff9db; border-left: 5px solid #ffec99; padding: 15px; border-radius: 4px; margin: 20px 0; }
        .feature-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .feature-item { background: #fff; border: 1px solid #eee; padding: 15px; border-radius: 8px; }
        code { background: #f1f3f5; padding: 2px 6px; border-radius: 4px; font-family: "Consolas", "Monaco", monospace; font-size: 0.9em; color: #e03131; }
    </style>
</head>
<body>

    <h1>🤖 JHappy AI Exporter ユーザーガイド</h1>
    
    <p>JHappy AI Exporterは、Eclipse上のプロジェクト資産を「AI（LLM）が最も理解しやすい形式」でエクスポートするための専用ツールです。複数のソースファイルを構造化された1つのテキストファイルにまとめ、ChatGPT、Gemini、Claudeなどへのコンテキスト提供を劇的に効率化します。</p>

    <div class="toc">
        <strong>クイックメニュー</strong>
        <ul>
            <li><a href="#usage">▶ 基本的な使い方</a></li>
            <li><a href="#filtering">▶ ファイル・フォルダのフィルタリング</a></li>
            <li><a href="#capacity">▶ 出力容量（MB）の制限</a></li>
            <li><a href="#encoding">▶ 文字コードと出力形式</a></li>
            <li><a href="#preferences">▶ デフォルト設定の変更</a></li>
        </ul>
    </div>

    <h2 id="usage">基本的な使い方</h2>
    <p>数クリックで、解析に必要な全コードを1ファイルに集約できます。</p>
    <ol>
        <li><b>選択:</b> パッケージ・エクスプローラー等で、対象のプロジェクトやフォルダを右クリックします。</li>
        <li><b>実行:</b> メニューから <b>🤖 AI用にソースをコピー</b> を選択します。</li>
        <li><b>調整:</b> 実行時設定ダイアログが表示されます。今回のみ適用したいフィルタや容量制限を調整できます。</li>
        <li><b>保存:</b> <code>OK</code> を押して保存先を指定すると、結合された <code>source_context.txt</code> が生成されます。</li>
    </ol>
    <div class="image-container">
        <img src="../images/image3.jpg" alt="右クリックメニューの操作" width="300">
        <p><small>図：右クリックメニューから一括エクスポートを開始</small></p>
    </div>
		<div class="image-container">
		       <img src="../images/image4.jpg" alt="右クリックメニューの操作" width="450">
		       <p><small>図：エクスポート画面</small></p>
		   </div>

    <h2 id="filtering">ファイル・フォルダのフィルタリング</h2>
    <p>AIに渡したくない不要なデータ（バイナリやビルド成果物）を除外することで、トークンを節約し精度を高めます。</p>
    <div class="feature-grid">
        <div class="feature-item">
            <h3>許可拡張子（ホワイトリスト）</h3>
            <p><code>java, py, js</code> のように指定すると、該当するファイルのみを収集します。空欄の場合はすべてのファイルが対象になります。</p>
        </div>
        <div class="feature-item">
            <h3>除外拡張子（ブラックリスト）</h3>
            <p><code>class, jar, exe</code> など、解析に不要な拡張子を指定して排除します。</p>
        </div>
    </div>
		
    <p><b>フォルダ除外:</b> <code>target, bin, .git</code> などのディレクトリを名前で指定して、再帰的な探索からスキップさせることができます。</p>

    <h2 id="capacity">出力容量（MB）の制限</h2>
    <p>AIサービスの入力制限（コンテキストウィンドウ）を考慮し、出力ファイルの最大サイズを制限できます。</p>
    <ul>
        <li><b>MB単位の指定:</b> 実行時ダイアログで <code>2</code> と入力すれば、約2MBで書き込みを自動停止します。</li>
        <li><b>安全な切断:</b> 容量制限に達した場合、ファイルの末尾に警告メッセージを挿入し、どのファイルまで処理されたかを明示します。</li>
        <li><b>無制限出力:</b> <code>0</code> を入力することで、プロジェクト全件を制限なく出力することも可能です。</li>
    </ul>
		
		<div class="image-container">
			    <img src="../images/image2.jpg" alt="設定画面" width="450">
			    <p><small>図：デフォルト設定画面</small></p>
			</div>

    <h2 id="encoding">文字コードと出力形式</h2>
    <div class="note">
        <strong>UTF-8への自動統一:</strong><br>
        Eclipseプロジェクト内の各ファイルが <code>Shift-JIS</code> や <code>EUC-JP</code> であっても、Eclipseの設定に基づいて正しく読み込み、すべて <b>UTF-8</b> に変換して1つのファイルに結合します。これによりAI側での文字化けを防ぎます。
    </div>
    <p>出力されるテキストは、各ファイルのパスがMarkdownのヘッダー（##）で区切られ、コードブロック（```）で囲まれた「AIがファイル構造を理解しやすい」形式になっています。</p>

		
	

</body>
</html>